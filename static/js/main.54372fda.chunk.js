(this.webpackJsonpvezdecod=this.webpackJsonpvezdecod||[]).push([[0],{157:function(e,t,a){e.exports=a(248)},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);a(158),a(184),a(186),a(187),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(196),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226);var n=a(0),r=a.n(n),c=a(91),l=a.n(c),o=a(34),i=a.n(o),m=a(10),s=a(2),u=(a(38),a(96)),d=a.n(u),f=a(64),b=null,E=function(e){var t=b;if(!t||e){var a={image:"",name:"",desc:"",podcastFile:"",isExplicit:!1,isExcludedFromExport:!1,isTrailer:!1,availableTo:0,timecodes:[],fileName:"",duration:0};return b=a,a}return t},g=function(e){var t=E(),a=Object(f.a)(Object(f.a)({},t),e);return(b=a).timecodes.sort(p),a},p=function(e,t){return e.time-t.time},v=["\u0412\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c","\u0414\u0440\u0443\u0437\u044c\u044f\u043c \u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0430\u043c","\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u0440\u0443\u0437\u044c\u044f\u043c"],h=function(e){var t=e.id,a=e.go;return r.a.createElement(s.n,{id:t},r.a.createElement(s.o,null,"\u041f\u043e\u0434\u043a\u0430\u0441\u0442"),r.a.createElement(s.q,{stretched:!0,action:r.a.createElement(s.b,{onClick:function(){E(!0),a("newPodcast")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442")},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},r.a.createElement(d.a,null)),r.a.createElement(s.w,{level:"2",weight:"semibold",style:{color:"black",marginBottom:10}},"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0438 \u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c",r.a.createElement("br",null),"\u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430\u043c\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0430."))},y=a(39),j=a.n(y),O=a(40),C=a.n(O),k=a(97),w=a.n(k),S=(a(243),a(249)),x=Object(s.y)(),N=function(e){var t=e.id,a=e.go,c=Object(n.useState)(""),l=Object(m.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(""),d=Object(m.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(""),h=Object(m.a)(p,2),y=h[0],O=h[1],k=Object(n.useState)(null),N=Object(m.a)(k,2),T=N[0],F=N[1],A=Object(n.useState)(!1),R=Object(m.a)(A,2),D=R[0],B=R[1],I=Object(n.useState)(!1),L=Object(m.a)(I,2),M=L[0],q=L[1],P=Object(n.useState)(!1),z=Object(m.a)(P,2),V=z[0],U=z[1],W=Object(n.useState)(0),H=Object(m.a)(W,2),J=H[0],K=H[1],_=Object(n.useState)(""),G=Object(m.a)(_,2),Q=G[0],X=G[1];Object(n.useEffect)((function(){var e=E();i(e.image),b(e.name),O(e.desc),F(e.podcastFile),B(e.isExplicit),q(e.isExcludedFromExport),U(e.isTrailer),K(e.availableTo),X(e.fileName)}),[]);var Y=function(){o&&f&&y&&T&&(Z(),a("show"))},Z=function(){g({image:o,name:f,desc:y,podcastFile:T,isExplicit:D,isExcludedFromExport:M,isTrailer:V,availableTo:J,fileName:Q})};return r.a.createElement(s.n,{id:t},r.a.createElement(s.o,{left:r.a.createElement(s.p,{onClick:function(){return window.history.back()}},x===s.k?r.a.createElement(j.a,null):r.a.createElement(C.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),r.a.createElement(s.f,{style:{display:"flex"}},o?r.a.createElement("div",{className:"bg-image",style:{backgroundImage:"url(".concat(o,")")}},r.a.createElement("div",{className:"remove-btn",onClick:function(){i("")}},"\u2715")):r.a.createElement("label",null,r.a.createElement("div",{className:"select-file"},r.a.createElement("div",{className:"sf-text"},r.a.createElement(w.a,null))),r.a.createElement("input",{onChange:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){var a=t[0],n=new FileReader;n.onload=function(e){var t=e.target.result.toString();i(t)},n.readAsDataURL(a)}},type:"file",accept:"image/*",style:{display:"none"}})),r.a.createElement("div",{style:{width:"calc(100% - 72px)"}},r.a.createElement(s.g,{className:"formLayoutName"},r.a.createElement(s.l,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430",value:f,onChange:function(e){return b(e.currentTarget.value)}})))),r.a.createElement(s.g,null,r.a.createElement(s.v,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430",placeholder:"",value:y,onChange:function(e){return O(e.currentTarget.value)}})),T?r.a.createElement(s.u,{before:r.a.createElement("div",{className:"podcast-icon"},r.a.createElement(S.a,{style:{opacity:.4}}))},r.a.createElement("span",{style:{marginLeft:12}},Q)):r.a.createElement(s.q,{className:"load-block",action:r.a.createElement("label",null,r.a.createElement(s.b,{Component:"div",mode:"outline",onClick:Y},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),r.a.createElement("input",{onChange:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){var a=t[0],n=new FileReader;n.onload=function(){X(a.name),F(a)},n.readAsDataURL(a)}},type:"file",accept:"audio/*",style:{display:"none"}}))},r.a.createElement(s.w,{level:"2",weight:"semibold",style:{color:"black",marginBottom:10}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u043e\u0444\u0430\u0439\u043b \u0438\u0437 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0438 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0435\u0433\u043e"),T&&r.a.createElement(s.f,null,r.a.createElement(s.c,{level:"2",weight:"regular",style:{color:"var(--text_placeholder)"}},"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0439\u043c\u043a\u043e\u0434\u044b \u0438 \u0441\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"),r.a.createElement(s.b,{size:"xl",mode:"outline",onClick:function(){Z(),a("edit")},style:{marginTop:16}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e\u0437\u0430\u043f\u0438\u0441\u044c")),r.a.createElement(s.t,null),r.a.createElement(s.g,null,r.a.createElement(s.h,null,r.a.createElement(s.e,{checked:D,onChange:function(e){return B(e.currentTarget.checked)}},"\u041d\u0435\u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442"),r.a.createElement(s.e,{checked:M,onChange:function(e){return q(e.currentTarget.checked)}},"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u044d\u043f\u0438\u0437\u043e\u0434 \u0438\u0437 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430"),r.a.createElement(s.e,{checked:V,onChange:function(e){return U(e.currentTarget.checked)}},"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430")),r.a.createElement(s.s,{top:"\u041a\u043e\u043c\u0443 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e\u0434\u043a\u0430\u0441\u0442",onChange:function(e){K(Number.parseInt(e.currentTarget.value,10))},defaultValue:J.toString()},v.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e)}))),r.a.createElement(s.b,{size:"xl",onClick:Y,style:{opacity:o&&f&&y&&T?1:.5}},"\u0414\u0430\u043b\u0435\u0435")))},T=a(98),F=a.n(T),A=function(e){var t=e.id;e.go;return r.a.createElement(s.n,{id:t},r.a.createElement(s.o,null,"\u041f\u043e\u0434\u043a\u0430\u0441\u0442\u044b"),r.a.createElement(s.q,{stretched:!0,action:r.a.createElement(s.b,{onClick:function(){}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u043e\u043c")},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},r.a.createElement(F.a,{style:{color:"var(--accent)"}})),r.a.createElement(s.w,{level:"2",weight:"semibold",style:{color:"black",marginBottom:10}},"\u041f\u043e\u0434\u043a\u0430\u0441\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0438\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0430\u043c\u0438",r.a.createElement("br",null),"\u043e \u043d\u043e\u0432\u043e\u043c \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",r.a.createElement("br",null),"\u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u0435\u0439"))},R=(a(244),a(63)),D=a(99),B=a.n(D),I=a(100),L=a.n(I),M=a(101),q=a.n(M),P=(a(245),a(251)),z=a(252),V=a(253),U=a(254),W=a(250),H=(a(246),function(e){e.timecodes;var t=e.idx,a=e.remove,c=Object(n.useState)(0),l=Object(m.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(""),d=Object(m.a)(u,2),f=d[0],b=d[1];Object(n.useEffect)((function(){var e=E().timecodes[t];i(e.time),b(e.text)}),[]);return r.a.createElement("div",{className:"timecode"},r.a.createElement(W.a,{onClick:a,style:{marginLeft:12,marginTop:10}}),r.a.createElement(s.l,{value:f,onChange:function(e){return a=e.currentTarget.value,b(a),void(E().timecodes[t].text=a);var a}}),r.a.createElement(s.l,{type:"time",value:function(e){var t=Math.floor(e/60),a=Math.floor(e-60*t).toString();return"".concat(t.toString().padStart(2,"0"),":").concat(a.padStart(2,"0"))}(o),onChange:function(e){return a=function(e){var t=e.split(":");return 0===t.length?0:1===t.length?Number.parseInt(t[0]):60*Number.parseInt(t[0])+Number.parseInt(t[1])}(e.currentTarget.value),i(a),void(E().timecodes[t].time=a);var a}}))}),J=Object(s.y)(),K=function(e){var t=e.id,a=Object(n.useState)(null),c=Object(m.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(!1),u=Object(m.a)(i,2),d=u[0],f=u[1],b=Object(n.useState)(null),p=Object(m.a)(b,2),v=p[0],h=p[1],y=Object(n.useState)(!1),O=Object(m.a)(y,2),k=O[0],w=O[1],S=Object(n.useState)(!1),x=Object(m.a)(S,2),N=x[0],T=x[1],F=Object(n.useState)(0),A=Object(m.a)(F,2),D=A[0],I=A[1],M=Object(n.useState)([]),W=Object(m.a)(M,2),K=W[0],_=W[1];Object(n.useEffect)((function(){var e=E(),t=B.a.create({container:"#waveform",waveColor:"#4986cc",progressColor:"#4986cc",cursorColor:"#FF3347",height:96,barGap:3,barWidth:2,barHeight:.65,barRadius:2,fillParent:!1,scrollParent:!0,plugins:[L.a.create({}),q.a.create({container:"#timeline",notchPercentHeight:40,primaryColor:"#99A2AD",secondaryColor:"#99A2AD",primaryFontColor:"#99A2AD",secondaryFontColor:"#99A2AD",height:14})]});o(t),_(e.timecodes),t.on("seek",(function(e){var a=t.getDuration(),n=e*a,r=Object.values(t.regions.list);if(r.length>0&&(n>r[0].end||n<r[0].start))t.clearRegions();else if(0===r.length){var c=Math.max(0,n-5),l=Math.min(n+5,a);t.clearRegions(),t.addRegion({start:c,end:l})}})),t.on("ready",(function(){g({duration:t.getDuration()})})),t.on("play",(function(){f(!0)})),t.on("pause",(function(){f(!1)})),t.loadBlob(e.podcastFile),t.on("audioprocess",(function(e){I(e)}))}),[]),Object(n.useEffect)((function(){if(l){var e=l.getDuration();k&&D<3?l.setVolume(D/3):N&&D>e-3?l.setVolume((e-D)/3):l.setVolume(1)}}),[D]);return r.a.createElement(s.n,{id:t},r.a.createElement(s.o,{left:r.a.createElement(s.p,{onClick:function(){return window.history.back()}},J===s.k?r.a.createElement(j.a,null):r.a.createElement(C.a,null))},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("div",{className:"wf-container"},r.a.createElement("div",{id:"timeline"}),r.a.createElement("div",{id:"waveform"})),r.a.createElement("div",{className:"btns-container"},r.a.createElement(s.b,{onClick:function(){try{l.playPause()}catch(e){}},className:"square-btn",before:d?r.a.createElement(P.a,{style:{marginLeft:12}}):r.a.createElement(z.a,{style:{marginLeft:10}})}),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(s.b,{onClick:function(){!function(){var e=Object.values(l.regions.list);if(e.length>0){var t=l.backend.buffer,a=l.getDuration()-(e[0].end-e[0].start),n=l.backend.ac.createBuffer(t.numberOfChannels,a*t.sampleRate,t.sampleRate);h(t);var r=e[0].start*t.sampleRate,c=e[0].end*t.sampleRate,o=t.length-e[0].end*t.sampleRate,i=new Float32Array(parseInt(r)),m=new Float32Array(parseInt(o)),s=new Float32Array(i.length+m.length);t.copyFromChannel(i,0),t.copyFromChannel(m,0,c),s.set(i),s.set(m,r),n.copyToChannel(s,0),n.copyToChannel(s,1),l.loadDecodedBuffer(n),setTimeout((function(){g({duration:l.getDuration()})}),2e3)}}()},className:"square-btn",before:r.a.createElement("div",{className:"scissors"}),mode:"secondary"}),r.a.createElement(s.b,{onClick:function(){!function(){if(v)try{l.pause(),l.loadDecodedBuffer(v),h(null)}catch(e){}}()},className:"square-btn",before:r.a.createElement(V.a,{style:{marginLeft:10}}),style:{marginLeft:4,opacity:v?1:.5},mode:"secondary"})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(s.b,{className:"square-btn",before:r.a.createElement("div",{className:"bc-".concat(k?"white":"blue","-left")}),style:{marginRight:4},mode:k?"primary":"secondary",onClick:function(){w(!k)}}),r.a.createElement(s.b,{className:"square-btn",before:r.a.createElement("div",{className:"bc-".concat(N?"white":"blue","-right")}),mode:N?"primary":"secondary",onClick:function(){T(!N)}}))),r.a.createElement(s.i,{header:r.a.createElement(s.j,{mode:"secondary"},"\u0422\u0430\u0439\u043c\u043a\u043e\u0434\u044b")},K.map((function(e,t){return r.a.createElement(H,{idx:t,key:t,remove:function(){return function(e){var t=E();t.timecodes.splice(e,1),_(Object(R.a)(t.timecodes))}(t)}})})),r.a.createElement(s.d,{before:r.a.createElement(U.a,null),onClick:function(){var e=E();e.timecodes.push({text:"\u0422\u0430\u0439\u043c\u043a\u043e\u0434 #".concat(e.timecodes.length- -1),time:l.getCurrentTime()}),_(Object(R.a)(e.timecodes))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0439\u043c\u043a\u043e\u0434")))},_=(a(247),Object(s.y)()),G=function(e){var t=e.id,a=e.go,c=Object(n.useState)(E()),l=Object(m.a)(c,2),o=l[0];l[1];return r.a.createElement(s.n,{id:t},r.a.createElement(s.o,{left:r.a.createElement(s.p,{onClick:function(){return window.history.back()}},_===s.k?r.a.createElement(j.a,null):r.a.createElement(C.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),r.a.createElement(s.r,{before:r.a.createElement(s.a,{mode:"app",size:48,src:o.image}),text:"\u0412\u0430\u0441\u0438\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432",caption:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ".concat(function(){var e=Math.floor(o.duration/3600),t=Math.floor((o.duration-3600*e)/60),a=Math.floor(o.duration-3600*e-60*t);return"".concat(e,":").concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}())},o.name),r.a.createElement(s.t,null),r.a.createElement(s.f,null,r.a.createElement(s.i,{header:r.a.createElement(s.w,{style:{marginTop:0},level:"3",weight:"semibold"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435")},o.desc)),r.a.createElement(s.t,null),r.a.createElement(s.f,null,r.a.createElement(s.i,{header:r.a.createElement(s.w,{style:{marginTop:0,marginBottom:8},level:"3",weight:"semibold"},"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435")},o.timecodes.map((function(e){return r.a.createElement("div",{style:{marginBottom:8}},r.a.createElement(s.m,null,function(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}(e.time))," \u2014 ",e.text)})))),r.a.createElement(s.b,{size:"xl",onClick:function(){a("finish")},className:"bottom-btn"},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"))},Q=function(){var e=Object(n.useState)("start"),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(e){c(e),window.history.pushState({panel:e},"")};return Object(n.useEffect)((function(){window.history.pushState({panel:"start"},""),window.onpopstate=function(e){c(e.state&&e.state.panel||"start")},i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}}))}),[]),r.a.createElement(s.x,{activePanel:a},r.a.createElement(h,{id:"start",go:l}),r.a.createElement(N,{id:"newPodcast",go:l}),r.a.createElement(K,{id:"edit"}),r.a.createElement(G,{id:"show",go:l}),r.a.createElement(A,{id:"finish",go:l}))};i.a.send("VKWebAppInit"),l.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.54372fda.chunk.js.map