(this.webpackJsonpvezdecod=this.webpackJsonpvezdecod||[]).push([[0],{157:function(e,t,a){e.exports=a(248)},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);a(158),a(184),a(186),a(187),a(189),a(190),a(191),a(192),a(193),a(194),a(195),a(196),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(209),a(210),a(211),a(212),a(213),a(214),a(215),a(216),a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226);var n=a(0),c=a.n(n),r=a(91),l=a.n(r),o=a(34),i=a.n(o),s=a(10),m=a(2),u=(a(38),a(96)),d=a.n(u),f=a(64),b=null,E=function(e){var t=b;if(!t||e){var a={image:"",name:"",desc:"",podcastFile:"",isExplicit:!1,isExcludedFromExport:!1,isTrailer:!1,availableTo:0,timecodes:[],fileName:"",duration:0};return b=a,a}return t},g=function(e){var t=E(),a=Object(f.a)(Object(f.a)({},t),e);return(b=a).timecodes.sort(p),a},p=function(e,t){return e.time-t.time},h=["\u0412\u0441\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c","\u0414\u0440\u0443\u0437\u044c\u044f\u043c \u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0430\u043c","\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u0440\u0443\u0437\u044c\u044f\u043c"],v=function(e){var t=e.id,a=e.go;return c.a.createElement(m.n,{id:t},c.a.createElement(m.o,null,"\u041f\u043e\u0434\u043a\u0430\u0441\u0442"),c.a.createElement(m.q,{stretched:!0,action:c.a.createElement(m.b,{onClick:function(){E(!0),a("newPodcast")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442")},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},c.a.createElement(d.a,null)),c.a.createElement(m.w,{level:"2",weight:"semibold",style:{color:"black",marginBottom:10}},"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0438 \u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c",c.a.createElement("br",null),"\u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430\u043c\u0438 \u0432\u0430\u0448\u0435\u0433\u043e \u0441\u043e\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0430."))},y=a(39),j=a.n(y),O=a(40),C=a.n(O),k=a(97),w=a.n(k),S=(a(243),a(249)),x=Object(m.y)(),N=function(e){var t=e.id,a=e.go,r=Object(n.useState)(""),l=Object(s.a)(r,2),o=l[0],i=l[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),f=d[0],b=d[1],p=Object(n.useState)(""),v=Object(s.a)(p,2),y=v[0],O=v[1],k=Object(n.useState)(null),N=Object(s.a)(k,2),T=N[0],D=N[1],A=Object(n.useState)(!1),F=Object(s.a)(A,2),R=F[0],B=F[1],L=Object(n.useState)(!1),M=Object(s.a)(L,2),q=M[0],I=M[1],P=Object(n.useState)(!1),z=Object(s.a)(P,2),V=z[0],U=z[1],W=Object(n.useState)(0),H=Object(s.a)(W,2),J=H[0],K=H[1],_=Object(n.useState)(""),G=Object(s.a)(_,2),Q=G[0],X=G[1];Object(n.useEffect)((function(){var e=E();i(e.image),b(e.name),O(e.desc),D(e.podcastFile),B(e.isExplicit),I(e.isExcludedFromExport),U(e.isTrailer),K(e.availableTo),X(e.fileName)}),[]);var Y=function(){o&&f&&y&&T&&(Z(),a("show"))},Z=function(){g({image:o,name:f,desc:y,podcastFile:T,isExplicit:R,isExcludedFromExport:q,isTrailer:V,availableTo:J,fileName:Q})};return c.a.createElement(m.n,{id:t},c.a.createElement(m.o,{left:c.a.createElement(m.p,{onClick:function(){return window.history.back()}},x===m.k?c.a.createElement(j.a,null):c.a.createElement(C.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),c.a.createElement(m.f,{style:{display:"flex"}},o?c.a.createElement("div",{className:"bg-image",style:{backgroundImage:"url(".concat(o,")")}},c.a.createElement("div",{className:"remove-btn",onClick:function(){i("")}},"\u2715")):c.a.createElement("label",null,c.a.createElement("div",{className:"select-file"},c.a.createElement("div",{className:"sf-text"},c.a.createElement(w.a,null))),c.a.createElement("input",{onChange:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){var a=t[0],n=new FileReader;n.onload=function(e){var t=e.target.result.toString();i(t)},n.readAsDataURL(a)}},type:"file",accept:"image/*",style:{display:"none"}})),c.a.createElement("div",{style:{width:"calc(100% - 72px)"}},c.a.createElement(m.g,{className:"formLayoutName"},c.a.createElement(m.l,{top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430",value:f,onChange:function(e){return b(e.currentTarget.value)}})))),c.a.createElement(m.g,null,c.a.createElement(m.v,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430",placeholder:"",value:y,onChange:function(e){return O(e.currentTarget.value)}})),T?c.a.createElement(m.u,{before:c.a.createElement("div",{className:"podcast-icon"},c.a.createElement(S.a,{style:{opacity:.4}}))},c.a.createElement("span",{style:{marginLeft:12}},Q)):c.a.createElement(m.q,{className:"load-block",action:c.a.createElement("label",null,c.a.createElement(m.b,{Component:"div",mode:"outline",onClick:Y},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),c.a.createElement("input",{onChange:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){var a=t[0],n=new FileReader;n.onload=function(){X(a.name),D(a)},n.readAsDataURL(a)}},type:"file",style:{display:"none"}}))},c.a.createElement(m.w,{level:"2",weight:"semibold",style:{color:"black",marginBottom:10}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0412\u0430\u0448 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u0430\u0443\u0434\u0438\u043e\u0444\u0430\u0439\u043b \u0438\u0437 \u0432\u0430\u0448\u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0438 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0435\u0433\u043e"),T&&c.a.createElement(m.f,null,c.a.createElement(m.c,{level:"2",weight:"regular",style:{color:"var(--text_placeholder)"}},"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0439\u043c\u043a\u043e\u0434\u044b \u0438 \u0441\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u043a\u0430\u0441\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"),c.a.createElement(m.b,{size:"xl",mode:"outline",onClick:function(){Z(),a("edit")},style:{marginTop:16}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0443\u0434\u0438\u043e\u0437\u0430\u043f\u0438\u0441\u044c")),c.a.createElement(m.t,null),c.a.createElement(m.g,null,c.a.createElement(m.h,null,c.a.createElement(m.e,{checked:R,onChange:function(e){return B(e.currentTarget.checked)}},"\u041d\u0435\u043d\u043e\u0440\u043c\u0430\u0442\u0438\u0432\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442"),c.a.createElement(m.e,{checked:q,onChange:function(e){return I(e.currentTarget.checked)}},"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u044d\u043f\u0438\u0437\u043e\u0434 \u0438\u0437 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0430"),c.a.createElement(m.e,{checked:V,onChange:function(e){return U(e.currentTarget.checked)}},"\u0422\u0440\u0435\u0439\u043b\u0435\u0440 \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0430")),c.a.createElement(m.s,{top:"\u041a\u043e\u043c\u0443 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e\u0434\u043a\u0430\u0441\u0442",onChange:function(e){K(Number.parseInt(e.currentTarget.value,10))},defaultValue:J.toString()},h.map((function(e,t){return c.a.createElement("option",{value:t,key:t},e)}))),c.a.createElement(m.b,{size:"xl",onClick:Y,style:{opacity:o&&f&&y&&T?1:.5}},"\u0414\u0430\u043b\u0435\u0435")))},T=a(98),D=a.n(T),A=function(e){var t=e.id;e.go;return c.a.createElement(m.n,{id:t},c.a.createElement(m.o,null,"\u041f\u043e\u0434\u043a\u0430\u0441\u0442\u044b"),c.a.createElement(m.q,{stretched:!0,action:c.a.createElement(m.b,{onClick:function(){}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u043e\u043c")},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:10}},c.a.createElement(D.a,{style:{color:"var(--accent)"}})),c.a.createElement(m.w,{level:"2",weight:"semibold",style:{color:"black",marginBottom:10}},"\u041f\u043e\u0434\u043a\u0430\u0441\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0438\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0430\u043c\u0438",c.a.createElement("br",null),"\u043e \u043d\u043e\u0432\u043e\u043c \u043f\u043e\u0434\u043a\u0430\u0441\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",c.a.createElement("br",null),"\u0431\u043e\u043b\u044c\u0448\u0435 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u0435\u0439"))},F=(a(244),a(63)),R=a(99),B=a.n(R),L=a(100),M=a.n(L),q=a(101),I=a.n(q),P=(a(245),a(251)),z=a(252),V=a(253),U=a(254),W=a(250),H=(a(246),function(e){e.timecodes;var t=e.idx,a=e.remove,r=Object(n.useState)(0),l=Object(s.a)(r,2),o=l[0],i=l[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),f=d[0],b=d[1];Object(n.useEffect)((function(){var e=E().timecodes[t];i(e.time),b(e.text)}),[]);return c.a.createElement("div",{className:"timecode"},c.a.createElement(W.a,{onClick:a,style:{marginLeft:12,marginTop:10}}),c.a.createElement(m.l,{value:f,onChange:function(e){return a=e.currentTarget.value,b(a),void(E().timecodes[t].text=a);var a}}),c.a.createElement(m.l,{type:"time",value:function(e){var t=Math.floor(e/60),a=Math.floor(e-60*t).toString();return"".concat(t.toString().padStart(2,"0"),":").concat(a.padStart(2,"0"))}(o),onChange:function(e){return a=function(e){var t=e.split(":");return 0===t.length?0:1===t.length?Number.parseInt(t[0]):60*Number.parseInt(t[0])+Number.parseInt(t[1])}(e.currentTarget.value),i(a),void(E().timecodes[t].time=a);var a}}))}),J=Object(m.y)(),K=function(e){var t=e.id,a=Object(n.useState)(null),r=Object(s.a)(a,2),l=r[0],o=r[1],i=Object(n.useState)(!1),u=Object(s.a)(i,2),d=u[0],f=u[1],b=Object(n.useState)(null),p=Object(s.a)(b,2),h=p[0],v=p[1],y=Object(n.useState)(!1),O=Object(s.a)(y,2),k=O[0],w=O[1],S=Object(n.useState)(!1),x=Object(s.a)(S,2),N=x[0],T=x[1],D=Object(n.useState)(0),A=Object(s.a)(D,2),R=A[0],L=A[1],q=Object(n.useState)([]),W=Object(s.a)(q,2),K=W[0],_=W[1];Object(n.useEffect)((function(){var e=E(),t=B.a.create({container:"#waveform",waveColor:"#4986cc",progressColor:"#4986cc",cursorColor:"#FF3347",height:96,barGap:3,barWidth:2,barHeight:.65,barRadius:2,fillParent:!1,scrollParent:!0,plugins:[M.a.create({}),I.a.create({container:"#timeline",notchPercentHeight:40,primaryColor:"#99A2AD",secondaryColor:"#99A2AD",primaryFontColor:"#99A2AD",secondaryFontColor:"#99A2AD",height:14})]});o(t),_(e.timecodes),t.on("seek",(function(e){var a=t.getDuration(),n=e*a,c=Object.values(t.regions.list);if(c.length>0&&(n>c[0].end||n<c[0].start))t.clearRegions();else if(0===c.length){var r=Math.max(0,n-5),l=Math.min(n+5,a);t.clearRegions(),t.addRegion({start:r,end:l})}})),t.on("ready",(function(){g({duration:t.getDuration()})})),t.on("play",(function(){f(!0)})),t.on("pause",(function(){f(!1)})),t.loadBlob(e.podcastFile),t.on("audioprocess",(function(e){L(e)}))}),[]),Object(n.useEffect)((function(){if(l){var e=l.getDuration();k&&R<3?l.setVolume(R/3):N&&R>e-3?l.setVolume((e-R)/3):l.setVolume(1)}}),[R]);return c.a.createElement(m.n,{id:t},c.a.createElement(m.o,{left:c.a.createElement(m.p,{onClick:function(){return window.history.back()}},J===m.k?c.a.createElement(j.a,null):c.a.createElement(C.a,null))},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"),c.a.createElement("div",{className:"wf-container"},c.a.createElement("div",{id:"timeline"}),c.a.createElement("div",{id:"waveform"})),c.a.createElement("div",{className:"btns-container"},c.a.createElement(m.b,{onClick:function(){try{l.playPause()}catch(e){}},className:"square-btn",before:d?c.a.createElement(P.a,{style:{marginLeft:12}}):c.a.createElement(z.a,{style:{marginLeft:10}})}),c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(m.b,{onClick:function(){!function(){var e=Object.values(l.regions.list);if(e.length>0){var t=l.backend.buffer,a=l.getDuration()-(e[0].end-e[0].start),n=l.backend.ac.createBuffer(t.numberOfChannels,a*t.sampleRate,t.sampleRate);v(t);for(var c=e[0].start*t.sampleRate,r=e[0].end*t.sampleRate,o=t.getChannelData(0).slice(0,c),i=t.getChannelData(0).slice(r,t.length),s=t.getChannelData(1).slice(0,c),m=t.getChannelData(1).slice(r,t.length),u=n.getChannelData(0),d=n.getChannelData(1),f=0;f<o.length;f++)u[f]=o[f],d[f]=s[f];for(var b=0;b<i.length;b++)u[b+o.length]=i[b],d[b+s.length]=m[b];l.loadDecodedBuffer(n),setTimeout((function(){g({duration:l.getDuration()})}),2e3)}}()},className:"square-btn",before:c.a.createElement("div",{className:"scissors"}),mode:"secondary"}),c.a.createElement(m.b,{onClick:function(){!function(){if(h)try{l.pause(),l.loadDecodedBuffer(h),v(null)}catch(e){}}()},className:"square-btn",before:c.a.createElement(V.a,{style:{marginLeft:10}}),style:{marginLeft:4,opacity:h?1:.5},mode:"secondary"})),c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(m.b,{className:"square-btn",before:c.a.createElement("div",{className:"bc-".concat(k?"white":"blue","-left")}),style:{marginRight:4},mode:k?"primary":"secondary",onClick:function(){w(!k)}}),c.a.createElement(m.b,{className:"square-btn",before:c.a.createElement("div",{className:"bc-".concat(N?"white":"blue","-right")}),mode:N?"primary":"secondary",onClick:function(){T(!N)}}))),c.a.createElement(m.i,{header:c.a.createElement(m.j,{mode:"secondary"},"\u0422\u0430\u0439\u043c\u043a\u043e\u0434\u044b")},K.map((function(e,t){return c.a.createElement(H,{idx:t,key:t,remove:function(){return function(e){var t=E();t.timecodes.splice(e,1),_(Object(F.a)(t.timecodes))}(t)}})})),c.a.createElement(m.d,{before:c.a.createElement(U.a,null),onClick:function(){var e=E();e.timecodes.push({text:"\u0422\u0430\u0439\u043c\u043a\u043e\u0434 #".concat(e.timecodes.length- -1),time:l.getCurrentTime()}),_(Object(F.a)(e.timecodes))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0439\u043c\u043a\u043e\u0434")))},_=(a(247),Object(m.y)()),G=function(e){var t=e.id,a=e.go,r=Object(n.useState)(E()),l=Object(s.a)(r,2),o=l[0];l[1];return c.a.createElement(m.n,{id:t},c.a.createElement(m.o,{left:c.a.createElement(m.p,{onClick:function(){return window.history.back()}},_===m.k?c.a.createElement(j.a,null):c.a.createElement(C.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0434\u043a\u0430\u0441\u0442"),c.a.createElement(m.r,{before:c.a.createElement(m.a,{mode:"app",size:48,src:o.image}),text:"\u0412\u0430\u0441\u0438\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432",caption:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c: ".concat(function(){var e=Math.floor(o.duration/3600),t=Math.floor((o.duration-3600*e)/60),a=Math.floor(o.duration-3600*e-60*t);return"".concat(e,":").concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}())},o.name),c.a.createElement(m.t,null),c.a.createElement(m.f,null,c.a.createElement(m.i,{header:c.a.createElement(m.w,{style:{marginTop:0},level:"3",weight:"semibold"},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435")},o.desc)),c.a.createElement(m.t,null),c.a.createElement(m.f,null,c.a.createElement(m.i,{header:c.a.createElement(m.w,{style:{marginTop:0,marginBottom:8},level:"3",weight:"semibold"},"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435")},o.timecodes.map((function(e){return c.a.createElement("div",{style:{marginBottom:8}},c.a.createElement(m.m,null,function(e){var t=Math.floor(e/60),a=Math.floor(e-60*t);return"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))}(e.time))," \u2014 ",e.text)})))),c.a.createElement(m.b,{size:"xl",onClick:function(){a("finish")},className:"bottom-btn"},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"))},Q=function(){var e=Object(n.useState)("start"),t=Object(s.a)(e,2),a=t[0],r=t[1],l=function(e){r(e),window.history.pushState({panel:e},"")};return Object(n.useEffect)((function(){window.history.pushState({panel:"start"},""),window.onpopstate=function(e){r(e.state&&e.state.panel||"start")},i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(c)}}))}),[]),c.a.createElement(m.x,{activePanel:a},c.a.createElement(v,{id:"start",go:l}),c.a.createElement(N,{id:"newPodcast",go:l}),c.a.createElement(K,{id:"edit"}),c.a.createElement(G,{id:"show",go:l}),c.a.createElement(A,{id:"finish",go:l}))};i.a.send("VKWebAppInit"),l.a.render(c.a.createElement(Q,null),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.3700230b.chunk.js.map